# Создание демо-приложения 'modular-project'

Целью данного мануала является научится создавать веб-приложения с компонентной структурой на языке typescript.
Результатом прохождения данного мануала является простое веб-приложение собранное из произвольного набора компонентов разных типов: компонент, набор компонентов, старонний компонент, компонент-приложение. Готовое приложение можно получить по адресу xxxxxxxxxxxxxxxxxxxxxxxxxx и сверяться с ним как с эталоном в процессе прохождения мануала.

## Создание директории рабочей директории

* Создайте рабочую директорию
````shell
mkdir /GITS2/devkit/js/demo/modular-project
````
Для простоты в этой рабочей директории будут созданы все проекты, но в реальном приложении они могут находится в разных местах файловой системы и даже на разных удаленных машинах.

## Запуск скаффолдера
Для быстрого создания типовых проектов используется система скаффолдинга yeoman. Все типы проектов создаются с помощью скаффолдера generator-boilerplate созданного в нашей компании, который является yeoman плагином

````shell
/GITS2/tools/js/yeoman-generators/generator-boilerplate
````

* Запустите скаффолдер из рабочей директории
````shell
yo boilerplate
````

## Создание типового проекта 'компонент' (project-per-module)

В процессе разработки возникает необходимость выделения специфического функционала в отдельные пограммные единицы позволяющие повторное испольщование. Для этой цели отлично подходит тип проекта 'компонент'. Далее следуйте подсказкама или примените значения по умолчанию в скобках.

* Выбирите тип проекта 
````shell
project-per-module
````

* Укажите имя проекта 
````shell
domestic-lib
````

* Укажите имя фасадного файла модуля 
````shell
Domestic
````

* Откажитесь от установки npm install (вы сможите это сделать позже)
````shell
false
````

* Откажитесь от установки bower install (вы сможите это сделать позже)
````shell
false
````

* Откажитесь от генерацией скриптов (вы сможите это сделать позже)
````shell
false
````

Результатом окажется прокет 'domestic-lib' с тремя подпроектами, которые в дальнейшем должны быть добавлены в отдельные git репозитории

* [dev](#dev) - репозиторий разработки typescript модуля
* [dist](#dist) - репозиторий публикации typescript модуля в продакшен для использования в качестве зависимости в других модулях
* [test](#test) - репозиторий тестирования typescript модуля

Каждый подпроект снабжен сответствующими конфигурационными файлами и необходимым минимумом исходников для сборки

## Работа в подпроекте разработки компонента (dev)

Непосредственно разработка компонента происходит в подпроекте (dev)

* Переместитесь в подпроект dev проекта domestic-lib
````shell
cd /GITS2/devkit/js/demo/modular-project/domestic-lib/dev
````

### Установка средств поддержки времени разработки

В качестве таск-раннера в экосистеме используется grunt. Также в компании разработан grunt-project-builder плагин для сборки и зауска компонентов и тестов для них. 

````shell
/GITS2/tools/js/grunt-plugins/grunt-project-builder
````

Перед началом работы с любым из подпроектов необходимо установить средства поддержки времени разработки: штатного инструмента grunt-project-builder и других сторонних grunt плагинов если необходимая функциональновть не предусмотрена в штатном инструменте. grunt-project-builder может быть расширен при необходимости. Все средства поддержки времени разработки являются npm пакетами. Для указания установки необходимых средств разработки в каждом подпроекте существует конфигурационный файл package.json. Например:

````shell
/GITS2/devkit/js/demo/modular-project/domestic-lib/dev/package.json
````

* Установите средства поддержки времени разработки
````shell
npm install
````

Установленные средства поддержки времени разработки появятся в следующей директории

````shell
/GITS2/devkit/js/demo/modular-project/domestic-lib/dev/node_modules
````

### Установка компонентов-зависимостей для разрабатуемого модуля

Разрабатуемый компонент может использовать или расширять другие комопненты, таким образом он нуждается в указании зависимостей на соответствующие компоненты. Для обеспечения дерева зависимостей между компонентами используется стандарт веб-компонента bower. Все создаваемые и используемые в качестве зависимостей компоненты должны являться bower компонентами. Для указания установки необходимых компонентов-зависимостей в каждом подпроекте существует конфигурационный файл bower.json. Например:

````shell
/GITS2/devkit/js/demo/modular-project/domestic-lib/dev/bower.json
````

* Установите компоненты-зависимости
````shell
bower install
````

Установленные компоненты-зависимости (если указаны) появятся в следующей директории

````shell
/GITS2/devkit/js/demo/modular-project/domestic-lib/dev/bower_components
````

### Генерация скриптов частичной автоматизации процесса разработки

Для систематизации и упрощеия процесса разработки система сборки проектов предоставляет возможность генерации скриптов частичной автоматизации. Система сборки выполняет генерацию скриптов по первому обращению или в результате выполнения команды по умолчанию

* Сгенерите скрипты частичной автоматизации
````shell
grunt
````
или
````shell
grunt default
````

Cгенеренные скрипты появятся в соответствующей поддиректории

````shell
/GITS2/devkit/js/demo/modular-project/domestic-lib/dev/scripts
````

* [build.cmd](#) - сборка компонента
* [publish.cmd](#) - публикация компонента
* [build_and_publish.cmd](#) - сборка и публикация компонента
* [install-npm.cmd](#) - установка средств поддержки времени разработки
* [install-bower.cmd](#) - установка компонентов-зависимостей для разрабатуемого модуля
* [scripts.cmd](#) - регенерация скриптов частичной автоматизации процесса разработки
* [link-bower.cmd](#) - создание симлинка на разрабатываемый компонент для поддержки времени разработки


